@model Schedulator.Models.ScheduleGenerator
@{
    var count = 1;
}
@if (Model.PrequisitesStudentNeedsForCourses.Count() > 0)
{
    foreach (Schedulator.Models.ScheduleGenerator.PrequisitesStudentNeedsForCourse missingPrequisite in Model.PrequisitesStudentNeedsForCourses)
    {
        <div class="alert alert-danger">
            You do not have all the required prequisites for the Course @missingPrequisite.Course.CourseLetters @missingPrequisite.Course.CourseNumber <br />
            Missing Prequisites:
            <ul>
                @foreach (Schedulator.Models.Prerequisite prequisite in missingPrequisite.PrequisitesStudentNeeds)
                {
                    @prequisite.PrerequisiteCourse.CourseLetters 
                    @prequisite.PrerequisiteCourse.CourseNumber
                    if (prequisite.Concurrently)
                    {
                         @Html.Raw("Can take concurrently");
                    }
                }
            </ul>
        </div>
    }
}
@if (Model.Schedules.Count() == 0)
{
    <div class="alert alert-danger">
        Unfortunately no Schedules were possible with the selected courses and options. Some Courses might not be available during the selected semester or during the specified time. 
        It is also possible that the courses selected do not have any combinations where there isn't a time conflict.
    </div>
}
else
{
    <div class="alert alert-success">  @Model.Schedules.Count() schedules were successfully generated.</div>
    if (@Model.Schedules.Count() > 20)
    {
        <ul class="pagination">
            @for(int i = 0; i <= Model.Schedules.Count(); i += 20)
            { 
            <li><a>@i - @(i+20)</a></li>
            }
        </ul>
    }
}

@foreach (List<Schedulator.Models.Schedule> schedule in Model.Schedules)
{
    <div id="schedCount">#@count</div>
    count++;
    using (Ajax.BeginForm("RegisterSchedule", new AjaxOptions { HttpMethod = "Post", UpdateTargetId= count.ToString() }))
    {
        <!-- Schedules results -->
        <div id="@count.ToString()"></div><!-- EO #result -->
        <input type="submit" name="register" class="btn btn-primary" value="Register">
    
         @Html.Partial("_ScheduleAndLegend", schedule)
    }
    <hr />
}
